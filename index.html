<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>รายการสิ่งของที่จะซื้อ - OneList</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Modern UI Enhancements */
        :root {
            --primary-color: #6c5ce7; /* A vibrant purple */
            --primary-hover-color: #5a4ac7;
            --secondary-color: #00cec9; /* A bright teal */
            --background-color: #f0f2f5; /* Light grey background */
            --container-bg: #ffffff;
            --text-color: #2d3436; /* Dark grey for text */
            --light-text-color: #636e72;
            --border-color: #dfe6e9;
            --shadow-color: rgba(0, 0, 0, 0.08);
            --success-color: #00b894; /* Green for success */
            --danger-color: #d63031; /* Red for danger */
            --warning-color: #fdcb6e; /* Yellow for warning */
            --info-color: #0984e3; /* Blue for info */
            --font-family: 'Kanit', sans-serif;
        }

        body {
            font-family: var(--font-family);
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, var(--background-color) 0%, #e8edf2 100%);
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            font-size: 16px;
            line-height: 1.6;
        }

        .container {
            max-width: 700px;
            width: 90%;
            margin: 30px auto;
            background: var(--container-bg);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 15px 45px var(--shadow-color);
            border: 1px solid var(--border-color);
            position: relative;
            overflow: hidden;
        }

        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 8px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            border-top-left-radius: 20px;
            border-top-right-radius: 20px;
        }

        h1 {
            color: var(--primary-color);
            text-align: center;
            margin-bottom: 35px;
            font-weight: 700;
            font-size: 2.8em;
            letter-spacing: -0.05em;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.05);
        }

        .input-section {
            display: flex;
            margin-bottom: 30px;
            gap: 12px;
        }

        .input-section input[type="text"] {
            flex-grow: 1;
            padding: 15px 20px;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            font-size: 1.1em;
            outline: none;
            transition: all 0.3s ease;
            background-color: #fdfdfd;
            color: var(--text-color);
        }

        .input-section input[type="text"]:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 4px rgba(108, 92, 231, 0.15);
            background-color: #ffffff;
        }

        .input-section button {
            padding: 15px 28px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: 600;
            transition: all 0.3s ease;
            flex-shrink: 0;
            box-shadow: 0 6px 15px rgba(108, 92, 231, 0.25);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .input-section button:hover {
            background-color: var(--primary-hover-color);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(108, 92, 231, 0.35);
        }

        .input-section button:active {
            transform: translateY(0);
            box-shadow: 0 4px 10px rgba(108, 92, 231, 0.2);
        }

        ul {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }

        li {
            background-color: var(--container-bg);
            margin: 10px 0;
            padding: 15px 20px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
            border: 1px solid var(--border-color);
        }

        li:hover {
            box-shadow: 0 8px 20px rgba(0,0,0,0.08);
            transform: translateY(-3px);
        }

        li.checked {
            background-color: #e6fffa; /* Light teal for checked items */
            text-decoration: line-through;
            color: var(--light-text-color);
            border-color: #b2f0e9;
            opacity: 0.8;
        }

        li input[type="checkbox"] {
            appearance: none;
            -webkit-appearance: none;
            width: 24px;
            height: 24px;
            border: 2px solid var(--primary-color);
            border-radius: 6px;
            margin-right: 15px;
            cursor: pointer;
            position: relative;
            transition: all 0.2s ease;
            flex-shrink: 0;
        }

        li input[type="checkbox"]:checked {
            background-color: var(--success-color);
            border-color: var(--success-color);
        }

        li input[type="checkbox"]:checked::after {
            content: '\f00c'; /* FontAwesome check icon */
            font-family: 'Font Awesome 6 Free';
            font-weight: 900;
            color: white;
            font-size: 16px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        li span {
            flex-grow: 1;
            font-size: 1.1em;
            color: var(--text-color);
            word-break: break-word;
            padding-right: 10px;
        }

        li.checked span {
            color: var(--light-text-color);
        }

        li .actions button {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1em;
            margin-left: 10px;
            color: var(--info-color);
            transition: all 0.3s ease;
            padding: 8px 12px;
            border-radius: 8px;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }

        li .actions button.delete {
            color: var(--danger-color);
        }

        li .actions button:hover {
            background-color: rgba(9, 132, 227, 0.1);
            transform: translateY(-1px);
        }

        li .actions button.delete:hover {
            background-color: rgba(214, 48, 49, 0.1);
        }

        .action-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 30px;
            justify-content: center;
        }

        .action-buttons button {
            flex: 1;
            min-width: 180px;
            padding: 15px;
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .reset-button {
            background-color: var(--danger-color);
        }

        .reset-button:hover {
            background-color: #c0392b;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(214, 48, 49, 0.35);
        }

        .reset-button:active {
            transform: translateY(0);
            box-shadow: 0 4px 10px rgba(214, 48, 49, 0.2);
        }

        .copy-selected-button {
            background-color: var(--info-color);
        }

        .copy-selected-button:hover {
            background-color: #007bff;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(9, 132, 227, 0.35);
        }

        .copy-selected-button:active {
            transform: translateY(0);
            box-shadow: 0 4px 10px rgba(9, 132, 227, 0.2);
        }

        .toast {
            visibility: hidden;
            min-width: 280px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 10px;
            padding: 18px;
            position: fixed;
            z-index: 1000;
            left: 50%;
            bottom: 40px;
            transform: translateX(-50%);
            font-size: 1.1em;
            opacity: 0;
            transition: opacity 0.5s ease-in-out, visibility 0.5s ease-in-out;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            gap: 10px;
            justify-content: center;
        }

        .toast.show {
            visibility: visible;
            opacity: 1;
        }

        .bag-selection-section {
            margin-top: 30px;
            padding-top: 25px;
            border-top: 1px solid var(--border-color);
        }

        .bag-selection-section h2 {
            font-size: 1.6em;
            color: var(--primary-color);
            margin-bottom: 20px;
            text-align: center;
            font-weight: 600;
        }

        .bag-type-group {
            margin-bottom: 25px;
        }

        .bag-type-group h3 {
            font-size: 1.3em;
            color: var(--text-color);
            margin-bottom: 15px;
            border-bottom: 2px solid var(--secondary-color);
            padding-bottom: 8px;
            display: inline-block;
            font-weight: 500;
        }

        .bag-size-options {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            justify-content: center;
        }

        .bag-size-option {
            position: relative;
            display: inline-block;
        }

        .bag-size-option input[type="checkbox"] {
            position: absolute;
            opacity: 0;
            width: 0;
            height: 0;
        }

        .bag-size-option span {
            display: block;
            padding: 12px 18px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            cursor: pointer;
            background-color: #fdfdfd;
            color: var(--light-text-color);
            font-size: 1.05em;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .bag-size-option input[type="checkbox"]:checked + span {
            background-color: var(--secondary-color);
            color: white;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 4px rgba(0, 206, 201, 0.25);
            transform: translateY(-2px);
        }

        .bag-size-option span:hover {
            background-color: #eef2f5;
            border-color: var(--primary-color);
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }

        .bag-size-option input[type="checkbox"]:checked + span:hover {
            background-color: #00b8b3;
            border-color: #00b8b3;
        }

        /* Responsive adjustments */
        @media (max-width: 600px) {
            .container {
                padding: 25px;
                width: 95%;
            }
            h1 {
                font-size: 2em;
                margin-bottom: 25px;
            }
            .input-section {
                flex-direction: column;
                gap: 15px;
            }
            .input-section button {
                width: 100%;
            }
            li {
                flex-direction: column;
                align-items: flex-start;
                padding: 15px;
            }
            li .actions {
                margin-top: 10px;
                width: 100%;
                display: flex;
                justify-content: flex-end;
            }
            li input[type="checkbox"] {
                margin-bottom: 10px;
            }
            .action-buttons {
                flex-direction: column;
            }
            .action-buttons button {
                min-width: unset;
                width: 100%;
            }
            .toast {
                width: 90%;
                left: 5%;
                transform: translateX(0);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>รายการสิ่งของที่จะซื้อ</h1>
        <div class="input-section">
            <input type="text" id="newItemInput" placeholder="เพิ่มรายการใหม่...">
            <button onclick="addItem()">เพิ่ม</button>
        </div>
        <div class="bag-selection-section">
            <h2>ขนาด:</h2>
            <div class="bag-type-group">
                <h3>ถุงหิ้ว</h3>
                <div class="bag-size-options" id="carryBagOptions">
                    <!-- Options will be loaded by JavaScript -->
                </div>
            </div>
            <div class="bag-type-group">
                <h3>ถุงร้อน</h3>
                <div class="bag-size-options" id="hotBagOptions">
                    <!-- Options will be loaded by JavaScript -->
                </div>
            </div>
        </div>
        <ul id="shoppingList">
            <!-- รายการจะถูกโหลดด้วย JavaScript -->
        </ul>
        <button class="copy-selected-button" onclick="copySelectedItems()">คัดลอกรายการที่เลือก</button>
        <button class="reset-button" onclick="resetList()">รีเซ็ตรายการ</button>
        <div id="toast" class="toast"></div>
    </div>

    <script>
        const shoppingList = document.getElementById("shoppingList");
        const newItemInput = document.getElementById("newItemInput");
        const carryBagOptions = document.getElementById("carryBagOptions");
        const hotBagOptions = document.getElementById("hotBagOptions");

        let defaultItems = [
            { text: "ไก่สด", checked: false },
            { text: "เล็บมือนาง", checked: false },
            { text: "ตีนไก่", checked: false },
            { text: "ปลาดุก", checked: false },
            { text: "กุ้งสด", checked: false },
            { text: "หมึกสด", checked: false },
            { text: "ปูม้า", checked: false },
            { text: "ปูดำ", checked: false },
            { text: "หอยเชอรี่", checked: false },
            { text: "สีผสมอาหาร", checked: false },
            { text: "ถั่วลิสง", checked: false },
            { text: "กุ้งแห้ง", checked: false },
            { text: "กระเทียมเล็ก", checked: false },
            { text: "กระเทียมใหญ่", checked: false },
            { text: "กล่องใส่ไก่", checked: false },
            { text: "น้ำมะนาว", checked: false },
            { text: "น้ำกระเทียมดอง", checked: false },
            { text: "น้ำมันหอย", checked: false },
            { text: "น้ำมันพืช", checked: false },
            { text: "ซอสพริก", checked: false },
            { text: "ซอสฝาเขียว", checked: false },
            { text: "เกลือ", checked: false },
            { text: "พริกไทยดำ", checked: false },
            { text: "หอยดอง", checked: false },
            { text: "กะปิแท้", checked: false },
            { text: "น้ำตามะพร้าว", checked: false },
            { text: "น้ำตาลปี๊บ", checked: false },
            { text: "พริกแห้ง", checked: false },
            { text: "หอมแขก", checked: false },
            { text: "ไม้เสียบปลาดุก", checked: false },
            { text: "ถ้วยโฟม", checked: false },
            { text: "ช้อนส้อมพลาสติก", checked: false },
            { text: "เส้นเล็ก", checked: false },
            { text: "หมูทำต้ม", checked: false },
            { text: "หมูสับ", checked: false },
            { text: "คอแท้หมู", checked: false },
            { text: "เนื้อทำต้ม", checked: false },
            { text: "เนื้อทำก้อย", checked: false },
            { text: "ดีวัว", checked: false },
            { text: "หมูยอ", checked: false },
            { text: "ไข่เค็ม", checked: false },
            { text: "ขนมจีน", checked: false },
            { text: "พริกสด", checked: false },
            { text: "ผักกะหล่ำ", checked: false },
            { text: "มะเขือเปราะ", checked: false },
            { text: "ถั่วฝักยาว", checked: false },
            { text: "แตงกวา", checked: false },
            { text: "หน่อไม้ใส่ตำป่า", checked: false },
            { text: "ข่า", checked: false },
            { text: "ตะไคร้", checked: false },
            { text: "ใบมะกรูด", checked: false },
            { text: "ต้นหอม", checked: false },
            { text: "ผักชี", checked: false },
            { text: "ผักชีใบเลื่อย", checked: false },
            { text: "ผักชีลาว", checked: false },
            { text: "โหระพา", checked: false },
            { text: "ข้าวโพด", checked: false },
            { text: "มะละกอ", checked: false },
            { text: "มะนาว", checked: false },
            { text: "มะเขือเทศ", checked: false },
            { text: "มะม่วง", checked: false },
            { text: "ผักบุ้ง", checked: false },
            { text: "ใบเตย", checked: false },
            { text: "น้ำตาลทราย", checked: false },
            { text: "น้ำปลา", checked: false },
            { text: "ผงชูรส", checked: false },
            { text: "รสดี", checked: false },
            { text: "คนอร์", checked: false }
        ];

        let items = JSON.parse(localStorage.getItem("oneListItems")) || JSON.parse(JSON.stringify(defaultItems));

        const bagSizes = {
            "ถุงหิ้ว": ["12*20", "8*16", "7*15"],
            "ถุงร้อน": ["14*12", "3*5", "4/5*7", "6*11"]
        };

        let selectedBagItems = JSON.parse(localStorage.getItem("oneListSelectedBagItems")) || {};


        function saveItems() {
            localStorage.setItem("oneListItems", JSON.stringify(items));
            localStorage.setItem("oneListSelectedBagItems", JSON.stringify(selectedBagItems));
        }

        function renderBagOptions() {
            carryBagOptions.innerHTML = "";
            hotBagOptions.innerHTML = "";

            bagSizes["ถุงหิ้ว"].forEach(size => {
                const isChecked = selectedBagItems["ถุงหิ้ว"] && selectedBagItems["ถุงหิ้ว"].includes(size);
                carryBagOptions.innerHTML += `
                    <label class="bag-size-option">
                        <input type="checkbox" data-bag-type="ถุงหิ้ว" value="${size}" ${isChecked ? "checked" : ""} onchange="toggleBagSelection('ถุงหิ้ว', '${size}')">
                        <span>${size}</span>
                    </label>
                `;
            });

            bagSizes["ถุงร้อน"].forEach(size => {
                const isChecked = selectedBagItems["ถุงร้อน"] && selectedBagItems["ถุงร้อน"].includes(size);
                hotBagOptions.innerHTML += `
                    <label class="bag-size-option">
                        <input type="checkbox" data-bag-type="ถุงร้อน" value="${size}" ${isChecked ? "checked" : ""} onchange="toggleBagSelection('ถุงร้อน', '${size}')">
                        <span>${size}</span>
                    </label>
                `;
            });
        }

        function toggleBagSelection(type, size) {
            if (!selectedBagItems[type]) {
                selectedBagItems[type] = [];
            }

            const index = selectedBagItems[type].indexOf(size);
            if (index > -1) {
                selectedBagItems[type].splice(index, 1);
            } else {
                selectedBagItems[type].push(size);
            }
            saveItems();
            renderList(); // Re-render main list to reflect changes
        }

        function renderList() {
            shoppingList.innerHTML = "";

            // Add selected bag items to the list first
            let currentBagItems = [];
            for (const type in selectedBagItems) {
                selectedBagItems[type].forEach(size => {
                    currentBagItems.push({ text: `${type} ${size}`, checked: false, isBag: true });
                });
            }

            // Filter out existing bag items from the main items array to avoid duplicates
            const filteredItems = items.filter(item => !item.isBag);

            // Combine bag items and other items
            const combinedItems = [...currentBagItems, ...filteredItems];

            combinedItems.forEach((item, index) => {
                const li = document.createElement("li");
                li.className = item.checked ? "checked" : "";
                li.innerHTML = `
                    <input type="checkbox" ${item.checked ? "checked" : ""} onchange="toggleCheck(${index})">
                    <span>${item.text}</span>
                    <div class="actions">
                        ${!item.isBag ? `<button onclick="editItem(${index})">แก้ไข</button>` : ''}
                        ${!item.isBag ? `<button class="delete" onclick="deleteItem(${index})">ลบ</button>` : ''}
                    </div>
                `;
                shoppingList.appendChild(li);
            });
            renderBagOptions(); // Re-render bag options to update checked state
        }

        function addItem() {
            const itemText = newItemInput.value.trim();
            if (itemText !== "") {
                items.push({ text: itemText, checked: false, isBag: false });
                newItemInput.value = "";
                saveItems();
                renderList();
            }
        }

        function toggleCheck(index) {
            items[index].checked = !items[index].checked;
            saveItems();
            renderList();
        }

        function editItem(index) {
            const newText = prompt("แก้ไขรายการ:", items[index].text);
            if (newText !== null && newText.trim() !== "") {
                items[index].text = newText.trim();
                saveItems();
                renderList();
            }
        }

        function deleteItem(index) {
            if (confirm("คุณต้องการลบรายการนี้หรือไม่?")) {
                items.splice(index, 1);
                saveItems();
                renderList();
            }
        }

        function resetList() {
            if (confirm("คุณต้องการรีเซ็ตรายการทั้งหมดหรือไม่? (สถานะเช็คจะถูกล้าง)")) {
                items.forEach(item => item.checked = false);
                selectedBagItems = {}; // Clear selected bag items
                saveItems();
                renderList();
            }
        }

        function showToast(message) {
            const toast = document.getElementById("toast");
            toast.textContent = message;
            toast.className = "toast show";
            setTimeout(function(){
                toast.className = toast.className.replace("show", "");
            }, 3000);
        }

        async function copySelectedItems() {
            const selectedItems = items.filter(item => item.checked);
            if (selectedItems.length === 0) {
                showToast("ไม่มีรายการที่เลือกไว้");
                return;
            }

            let textToCopy = "รายการของที่จะซื้อ:\n";
            selectedItems.forEach(item => {
                textToCopy += `- ${item.text}\n`;
            });

            try {
                await navigator.clipboard.writeText(textToCopy);
                showToast("✅ คัดลอกรายการไปยังคลิปบอร์ดแล้ว");
            } catch (err) {
                console.error("ไม่สามารถคัดลอกได้: ", err);
                showToast("❌ ไม่สามารถคัดลอกรายการได้");
            }
        }

        // โหลดรายการเมื่อหน้าเว็บโหลดเสร็จ
        document.addEventListener("DOMContentLoaded", () => {
            renderList();
            renderBagOptions();
        });
    </script>
</body>
</html>

